<% module_namespacing do -%>
class Deserializable<%= class_name %> < JSONAPI::Deserializable::Resource
  id
<% attr_names.each do |attr| %>
  attribute :<%= attr %>
<% end -%>
<% has_one_rels.each do |reflection| %>
  has_one :<%= reflection.name %> do |rel, id, type|
    field <%= has_one_id_field_name(reflection.name) %>: id
<% if reflection.polymorphic? -%>
    field <%= has_one_type_field_name(reflection.name) %>: type
<% end -%>
  end
<% end -%>
<% has_many_rels.each do |reflection| %>
  has_many :<%= reflection.name %> do |rel, ids, types|
    field <%= has_many_id_field_name(reflection.name) %>: ids
<% if reflection.polymorphic? -%>
    field <%= has_one_type_field_name(reflection.name) %>: types
<% end -%>
  end
<% end -%>
end
<% end -%>
